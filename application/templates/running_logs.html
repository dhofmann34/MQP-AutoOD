<!DOCTYPE html>
<html lang ="en">
  <body id=body_results> 
    <ul id="ul_nav">
        {% for item in nav.top %}
        <li id = "nav" class="{{ 'active' if item.is_active else '' }}">
            <a id="li_a_nav" href="{{ item.url }}">{{ item.label }}</a>
        </li>
        {% endfor %}
    </ul>
</body>
  <head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='font-awesome-4.7.0/css/font-awesome.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/d3_visualization.css') }}"> 
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/logs.css') }}"/>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
      var activeFilename = null;

      function loadFile(element,url) {
        // Remove "active" class from all list items
        $('#file-list li').removeClass('active');
        
        // Add "active" class to the clicked list item
        $(element).parent().addClass('active');

        // Set the active filename
        activeFilename = $(element).text();

        $.get(url, function(data) {
              $('#file-content-container').html(data);
          });

        $('#download_link').attr('href', 'output/' + activeFilename);
      }

      function download_file(){
        // Get the content of the <pre> element within the div with id 'file-content'
        var content = document.getElementById('file-content').querySelector('pre').innerText;

        // Create a Blob containing the content
        var blob = new Blob([content], { type: 'text/plain' });

        var downloadLink = document.createElement('a');
        downloadLink.href = window.URL.createObjectURL(blob);
        downloadLink.download = 'log.txt';

        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

  </script>

  <title>AutoOD: Automatic Outlier Detection</title>

  </head>
  <body>
      <div class="logging_window">
        <ul id="file-list" class="grid-item">
            {% for file in files %}
                <li class="list_item">
                  <a href="#" onclick="loadFile(this, '{{ url_for('logs.view_file', filename=file) }}')">{{ file }} <!-- Ignore Error -->
                  </a>
                </li>
            {% endfor %}
        </ul>

        <div id="file-content-container" class="grid-item">
          <!-- Delete below -->
          <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
            width="110.000000pt" height="94.000000pt" viewBox="0 0 110.000000 94.000000"
            preserveAspectRatio="xMidYMid meet" transform="translate(0 100)">
            <g transform="translate(0.000000,94.000000) scale(0.100000,-0.100000)"
              fill="#000000" stroke="none">
              <path d="M142 910 c-23 -16 -44 -40 -46 -52 -3 -13 -10 -50 -16 -83 -6 -33
              -21 -96 -34 -140 -13 -44 -28 -101 -35 -128 -20 -86 -11 -507 12 -507 6 0 7
              27 3 73 -15 162 -18 314 -7 362 21 97 60 236 69 248 5 7 12 43 16 81 7 72 18
              103 45 123 27 21 31 14 15 -29 -8 -24 -11 -45 -6 -50 5 -5 14 17 21 51 7 34
              17 61 23 61 6 0 8 -9 4 -22 -3 -13 -8 -41 -11 -63 -4 -30 -3 -35 4 -20 5 11
              13 34 17 50 3 17 8 25 11 18 2 -6 0 -29 -6 -50 -6 -21 -11 -53 -11 -71 0 -32
              0 -32 25 -16 14 9 25 12 25 7 0 -11 -34 -43 -71 -65 -20 -13 -29 -30 -37 -74
              -15 -72 -15 -251 -1 -330 15 -87 73 -243 85 -231 3 2 -5 26 -17 53 -36 83 -60
              184 -66 284 -6 95 -6 95 21 109 14 8 26 21 26 29 0 21 103 117 152 141 53 25
              132 28 185 6 50 -21 92 -18 138 10 33 21 53 25 113 25 68 0 76 -2 104 -30 21
              -21 39 -30 63 -30 18 0 43 -9 56 -20 l24 -19 -35 9 c-43 12 -50 12 -50 1 0 -5
              17 -11 38 -14 44 -8 82 -32 82 -54 0 -8 -18 -35 -40 -60 -30 -34 -40 -55 -40
              -79 0 -46 -37 -64 -151 -71 -72 -5 -107 -2 -186 17 -54 13 -120 34 -147 47
              -28 12 -60 23 -72 23 -30 0 -40 17 -14 25 11 3 38 22 61 41 32 27 37 34 21 34
              -11 0 -25 -7 -32 -15 -7 -8 -30 -25 -51 -37 -38 -21 -52 -48 -25 -48 7 0 19
              -7 27 -16 7 -8 21 -13 31 -11 14 4 16 2 8 -13 -18 -34 -10 -57 35 -99 69 -64
              129 -97 206 -116 70 -17 180 -17 222 0 14 6 20 2 24 -13 3 -11 21 -28 41 -38
              49 -22 81 -52 98 -89 l13 -30 1 27 c0 33 -69 108 -99 108 -10 0 -24 7 -31 15
              -10 12 -7 20 14 46 31 37 32 45 7 85 l-19 32 25 11 c23 11 25 15 18 57 -6 43
              -4 47 34 89 46 50 49 69 22 123 -22 42 -59 67 -114 75 -22 3 -46 15 -56 28
              -15 19 -30 23 -99 27 -74 4 -85 2 -126 -22 -51 -30 -88 -33 -139 -11 -110 46
              -245 -9 -342 -138 -15 -21 -30 -35 -33 -33 -2 3 1 29 8 58 18 82 21 88 33 88
              22 0 77 60 77 85 0 30 -16 41 -37 23 -15 -12 -16 -10 -9 16 17 69 17 85 2 115
              -21 39 -42 39 -94 1z m478 -556 c81 -21 112 -25 205 -22 80 3 119 9 143 21 19
              10 32 13 32 7 0 -22 -74 -41 -185 -47 -96 -5 -127 -3 -210 16 -53 13 -99 20
              -102 17 -10 -10 30 -47 81 -75 27 -14 60 -32 74 -40 14 -7 53 -16 87 -18 56
              -5 64 -3 90 21 22 20 26 29 17 38 -20 20 -14 28 21 28 34 0 87 -33 74 -47 -5
              -4 -32 -15 -60 -25 -50 -16 -51 -16 -17 -17 33 -1 100 30 100 46 0 4 -10 18
              -22 31 -14 15 -17 23 -9 20 8 -2 24 -17 35 -32 l21 -28 -32 -28 c-26 -24 -44
              -29 -108 -35 -42 -4 -98 -5 -123 -1 -70 9 -164 58 -222 114 -47 45 -51 52 -40
              72 9 16 17 20 33 15 12 -3 65 -17 117 -31z m-57 -27 c31 -14 157 -35 227 -40
              40 -2 53 -29 23 -46 -14 -7 -36 -2 -87 21 -46 20 -79 28 -100 25 -30 -4 -106
              28 -106 46 0 10 6 9 43 -6z m145 -73 c17 -7 32 -18 32 -25 0 -7 -7 -8 -17 -4
              -10 4 -37 14 -61 22 -23 8 -39 19 -36 24 6 10 26 6 82 -17z"/>
              <path d="M710 657 c-19 -7 -44 -18 -55 -25 -18 -10 -18 -11 -2 -12 10 0 31 7
              46 15 16 8 64 18 107 23 l79 9 -70 1 c-38 1 -86 -5 -105 -11z"/>
              <path d="M417 645 c-45 -17 -97 -52 -97 -66 0 -6 15 1 33 14 51 38 78 50 137
              57 55 7 55 7 10 8 -25 0 -62 -6 -83 -13z"/>
              <path d="M570 636 l25 -15 -40 -1 c-40 0 -112 -35 -165 -80 -31 -27 -6 -15 36
              17 39 29 107 53 150 53 24 0 34 5 34 15 0 8 -6 15 -14 15 -8 0 -23 3 -33 6
              -10 3 -7 -2 7 -10z"/>
              <path d="M845 643 c-33 -7 -109 -36 -129 -49 -14 -10 -24 -10 -39 -2 -11 5
              -43 8 -71 6 -51 -5 -134 -34 -124 -43 3 -3 25 4 49 15 24 11 66 20 93 20 42 0
              47 -2 36 -15 -11 -13 -8 -15 18 -15 33 0 62 -22 62 -47 0 -12 4 -11 18 5 9 11
              41 36 71 56 61 41 48 49 -18 11 -46 -26 -67 -30 -90 -16 -11 7 -7 13 17 25 35
              18 46 20 38 7 -3 -5 11 0 31 10 22 11 58 19 87 19 27 0 47 2 45 4 -8 6 -74 13
              -94 9z"/>
              <path d="M866 571 c-24 -25 -27 -35 -22 -63 3 -18 7 -39 8 -45 1 -14 56 -9
              118 11 29 9 36 16 38 42 8 78 -86 114 -142 55z m99 -32 c0 -7 -8 -15 -17 -17
              -18 -3 -25 18 -11 32 10 10 28 1 28 -15z m-45 -50 c0 -11 -3 -19 -7 -19 -11 0
              -32 48 -25 54 9 10 32 -16 32 -35z"/>
              <path d="M595 552 c-55 -8 -65 -13 -65 -32 0 -10 -4 -22 -10 -25 -14 -9 -12
              -47 4 -67 17 -23 67 -22 126 0 39 15 44 21 41 42 -1 14 -7 33 -12 42 -12 22
              -59 44 -84 40z m50 -62 c0 -8 -8 -16 -17 -18 -13 -2 -18 3 -18 18 0 15 5 20
              18 18 9 -2 17 -10 17 -18z m-51 -36 c4 -15 4 -29 1 -32 -8 -8 -25 19 -25 41 0
              26 17 20 24 -9z"/>
              <path d="M390 504 c-71 -42 -95 -64 -70 -64 6 0 9 4 6 8 -2 4 21 21 52 37 48
              25 106 66 91 64 -2 0 -38 -20 -79 -45z"/>
              <path d="M722 468 c-7 -7 -12 -17 -12 -24 0 -7 -6 -15 -12 -18 -7 -4 -2 -3 12
              0 14 4 43 8 65 9 59 3 65 4 65 15 0 6 -20 10 -45 10 -25 0 -45 5 -45 10 0 14
              -13 13 -28 -2z"/>
            </g>
          </svg>
          <!-- Delete above -->
        </div>
      </div>
      <button id="download-btn" onclick="download_file()">Download Active File</button>
  </body>
</html> 